{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Link from 'next/link';\nimport { css } from '@emotion/css';\nimport Head from '../components/head';\nimport Header from '../components/header';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nconst pokemonConfig = require('../config');\n\nconst PokemonListPage = props => {\n  const {\n    0: pokemonlist,\n    1: setPokemonList\n  } = useState([]);\n  const {\n    0: emptypokemon,\n    1: setIsEmptyPokemon\n  } = useState(false);\n  const {\n    0: limit,\n    1: setLimit\n  } = useState(20);\n  const {\n    0: offset,\n    1: setOffset\n  } = useState(0);\n  const {\n    0: hasMoreItems,\n    1: setHasMoreItems\n  } = useState(true); //Styles\n\n  const listpokemon = css`\n  \t\tpadding: 16px 25px;\n\t`;\n  const textcard = css`\n\t\tmargin: 3px 6px 6px 6px;\n        font-size: 14px;\n\t\tcolor: black;\n\t`;\n  useEffect(() => {\n    getRefresh();\n  }, []);\n\n  function getRefresh() {\n    axios({\n      url: pokemonConfig.BASE_URL + '/api/getlistpokemon',\n      method: 'POST',\n      data: {\n        limit: limit,\n        offset: offset\n      },\n      timeout: pokemonConfig.TIMEOUT\n    }).then(function (response) {\n      if (response.data.code == '200') {\n        setPokemonList(response.data.data.results);\n\n        if (response.data.data.next != null) {\n          setOffset(1);\n          setHasMoreItems(response.data.data.results.length > 4 ? true : false);\n        }\n      } else {\n        setIsEmptyPokemon(true);\n      }\n    });\n  }\n\n  function getHandleLoadMore() {\n    axios({\n      url: pokemonConfig.BASE_URL + '/api/getlistpokemon',\n      method: 'POST',\n      data: {\n        limit: limit,\n        offset: offset\n      },\n      timeout: pokemonConfig.TIMEOUT\n    }).then(function (response) {\n      if (response.data.code == '200') {\n        let lists = pokemonlist.concat(response.data.data.results);\n        setPokemonList(lists);\n        setOffset(offset + 1);\n      } else {\n        setIsEmptyPokemon(true);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {}), /*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: listpokemon,\n      children: /*#__PURE__*/_jsx(InfiniteScroll, {\n        dataLength: pokemonlist,\n        next: getHandleLoadMore,\n        hasMore: hasMoreItems,\n        loader: /*#__PURE__*/_jsx(\"h6\", {\n          children: \"Loading...\"\n        }),\n        endMessage: /*#__PURE__*/_jsx(\"div\", {\n          className: \"alert alert-light text-center small\",\n          children: \"Semua data telah ditampilkan\"\n        }),\n        refreshFunction: getRefresh,\n        pullDownToRefresh: true,\n        pullDownToRefreshContent: /*#__PURE__*/_jsx(\"div\", {\n          className: \"alert alert-light text-center small\",\n          children: \"\\u2193 Pull down to refresh\"\n        }),\n        releaseToRefreshContent: /*#__PURE__*/_jsx(\"div\", {\n          className: \"alert alert-light text-center small\",\n          children: \"\\u2191 Release to refresh\"\n        }),\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: pokemonlist.map((data, i) => {\n            return /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-6 mb-3\",\n              children: /*#__PURE__*/_jsx(Link, {\n                href: \"/pokemondetail?name=\" + data.name,\n                as: \"/pokemondetail?name=\" + data.name,\n                passHref: true,\n                children: /*#__PURE__*/_jsxs(\"a\", {\n                  className: \"card\",\n                  children: [/*#__PURE__*/_jsx(\"img\", {\n                    className: \"border-bottom p-2\",\n                    src: data.image\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: textcard,\n                    children: data.name\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: textcard,\n                    children: data.type\n                  })]\n                })\n              })\n            }, i);\n          })\n        })\n      })\n    })]\n  });\n};\n\nexport default PokemonListPage;","map":null,"metadata":{},"sourceType":"module"}